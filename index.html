<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TCGA Segmentation Data</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="slider.css">
</head>

<body>
  <h3>TCGA Segmentation Data</h3>

  <div id="selections"></div>
  <p>&nbsp;</p><br>
  <div id="viewers" class="container"></div>

  <script src="//openseadragon.github.io/openseadragon/openseadragon.min.js"></script>
  <script src="openseadragon/openseadragon-filtering.js"></script>
  <script src="Dropdown.js"></script>
  <script src="nViewer.js"></script>
  <script src="Synchronizer.js"></script>
  <script>

    function production() {
      // My variables
      const arr = [];
      const style = "dragonbox";
      const iiif = window.location.origin + "/iiif/?iiif=/tcgaseg";
      const id = "blca/TCGA-2F-A9KO-01Z-00-DX1.195576CF-B739-4BD9-B15B-4A70AE287D3E";

      // Create viewer(s)
      const num_viewers = 1;
      for (let i = 0; i < num_viewers; i++) {
        let v = new nViewer("viewer" + i, style);
        arr.push(v);
      }

      // Add dropdown to the page
      // (Now that we have 1 or more viewers created)
      new Dropdown(arr);

      // Set viewer source
      arr.forEach(function (elem) {
        elem.setSources([iiif + "/tcgaimages/" + id + ".svs/info.json",
        iiif + "/featureimages/" + id + "-featureimage.tif/info.json"],
          [1.0, 1.0]);
      });

      // Controller to keep viewers in sync
      new Synchronizer(arr);
    }
    // production();

    function testing() {
      let dzi = "//openseadragon.github.io/example-images/duomo/duomo.dzi";
      let myViewer = new nViewer("viewer1", "dragonbox");
      myViewer.getViewer().open(dzi); // setSources will not work here.
      new Dropdown([myViewer]);
      new Synchronizer([myViewer]);
    }
    testing();

  </script>
</body>

</html>

<title>Mugshots</title>
<link href="favicon.ico" rel="icon" sizes="16x16 32x32" type="image/x-icon">
<!--<script src="https://openseadragon.github.io/openseadragon/openseadragon.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/gh/tdiprima/OpenseadragonFabricjsOverlay/openseadragon-fabricjs-overlay.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/gh/tdiprima/OpenseadragonFabricjsOverlay/fabric/fabric.adapted.js"></script>-->

<script src="vendor/openseadragon/openseadragon.min.js"></script>
<script src="vendor/fabric.adapted.js"></script>
<script src="vendor/openseadragon-fabricjs-overlay.js"></script>

<script src="src/mugshots.js"></script>
<style>
  .openseadragon {
    width: 480px;
    height: 640px;
    border: 1px solid black;
    color: #333;
  }

  /* MUGSHOTS */
  .thumbnail-container {
    overflow-x: scroll;
    width: 100%;
    padding: 0 15px;
  }

  .thumbnail-list {
    white-space: nowrap;
    list-style: none;
  }

  .thumbnail-list li {
    display: inline-block;
  }

  .thumbnail-image {
    display: block;
    padding: 2px;
    max-width: 100px;
    height: auto;
  }
</style>
<!-- Mugshots Demo -->
<div class="thumbnail-container" id="thumbnail-container"></div>
<div class="openseadragon" id="contentDiv"></div>
<script>
  document.addEventListener('DOMContentLoaded', function (event) {
    fetch('https://iiif.princeton.edu/loris/iiif/2/pudl0001%2F4609321%2Fs42%2F00000001.jp2/info.json')
      .then(response => response.json())
      .then(data => {
        const viewer = OpenSeadragon({
          id: 'contentDiv',
          prefixUrl: '//openseadragon.github.io/openseadragon/images/',
          tileSources: [{
            tileSource: data
          }]
        })
        const overlay = viewer.fabricjsOverlay({ scale: 1 })
        const opts = {
          divId: 'contentDiv',
          thumbId: 'thumbnail-container',
          infoUrl: 'https://iiif.princeton.edu/loris/iiif/2/pudl0001%2F4609321%2Fs42%2F00000001.jp2',
          imgDims: data,
          thumbnailSize: 256, // In image coordinates
          scrollerLength: 10,
          mugshotArray: [],
          roiColor: '#0f0',
          viewer: viewer,
          overlay: overlay,
        }
        mugshots(opts)
      })
  })
</script>
